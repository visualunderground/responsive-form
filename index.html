<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="ie ie6 no-js" dir="ltr" lang="en-GB"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" dir="ltr" lang="en-GB"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" dir="ltr" lang="en-GB"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" dir="ltr" lang="en-GB"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-ie no-js" dir="ltr" lang="en-GB"><!--<![endif]--><head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- <link media="all" type="text/css" href="http://fonts.googleapis.com/css?family=Raleway:500,300" id="dm_shop_square_fonts-css" rel="stylesheet"> -->
	<!-- <link rel="icon" href="/favicon.ico?v=2" type="image/x-icon" > -->
	<link rel='stylesheet' href='assets/css/app.css'>
	<script src='assets/js/modernizr-dev.js' ></script>
	<title>Responsive form</title>
	<script>
/*=====================================================================================================	
	HELP FUNCTION
  =====================================================================================================	*/
	function $() {
		var elements = new Array();
		for (var i = 0; i < arguments.length; i++) {
			var element = arguments[i];
			if (typeof element == 'string')
				element = document.getElementById(element);
			if (arguments.length == 1)
				return element;
			elements.push(element);
		}
		return elements;
	}
	var helpID = "";
	function showHelp(sTerm){
		if ($(sTerm + '-content')){	//	IF HELP HAS ALREADY BEEN CALLED - SHOW IT
			if ($(sTerm + '-content').className == "help-bubble"){
				clearhelp();	//	CLEAR OLD HELP ITEM
				return false;
			}else{
				clearhelp();	//	CLEAR OLD HELP ITEM
				helpID = sTerm;
				//	HELP POSITIONING
				if(Modernizr.mq('only screen and (max-width: 789px)')) { // NO COLS
					$(sTerm + '-content').style.top = $(helpID).parentNode.offsetHeight + 5 + "px";
					// $(sTerm + '-content').style.left = "0";
				}else{
					$(sTerm + '-content').style.top = "48px";
					// $(sTerm + '-content').style.left = "0";
				}  // true
				$(helpID + '-content').className = "help-bubble";
			}
		}else{	//	ELSE - CALL HELP
			clearhelp();	//	CLEAR OLD HELP ITEM
			helpID = sTerm;
			//	CREATE NODE
			var oDiv = document.createElement("div");
			oDiv.className = 'help-bubble';
			oDiv.id = helpID + "-content";
			//	HELP POSITIONING		//if (helpPosition=='relative'){oDiv.style.left = $(helpID).offsetLeft + 40 + "px";}	//	REMOVE TO USE CSS ONLY (STATIC) POSITIONING
			if(Modernizr.mq('only screen and (max-width: 789px)')) { // NO COLS
				oDiv.style.top = $(helpID).parentNode.offsetHeight + 5 + "px";
				// oDiv.style.left = "0";
			}else{
				oDiv.style.top = "48px";
				// oDiv.style.left = "0";
			}  
			oDiv.innerHTML = "<div class='help-bubble__content'><h5 class='help-bubble__header'>Test</h5><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. link Quisque sed fringilla ipsum.</p><ul><li>One</li><li>Two</li></ul><p>Suspendisse ut sem augue. Suspendisse sed magna a neque pretium aliquet. Sed justo dolor, bibendum vehicula imperdiet nec. </p><a href='javascript:clearhelp();' class='help-bubble__close-link' title='Close'>x</a></div>";
			$(helpID).parentNode.insertBefore(oDiv, $(helpID).nextSibling);
		}
		return false;
	}
	
	function clearhelp(){
		sID = helpID + "-content";
		if (!helpID){return;}
		$(sID).className = "help-bubble is-hidden";
	}
	</script>
</head>
<body>
	<form action="#" novalidate>
	<header class="global-header">
		<h1>Product type <small>Secondary text</small></h1>
	</header>


	<section class="sub-nav">
	    <div class="sub-nav__content">
	        <div class="sub-nav__actions">
	            <a href="#" class=""><span class="button">Primary action</span></a>
	        </div>
	        <a href="#" class="sub-nav__prompt-link">Browse</a>
	        <ul class="sub-nav__destinations">
	            <li class="sub-nav__item">
	                <a class="sub-nav__item-link" href="#">Section 1</a>
	            </li>
	            <li class="sub-nav__item">
	                <a class="sub-nav__item-link" href="#">Section 1</a>
	            </li>
	            <li class="sub-nav__item">
	                <a class="sub-nav__item-link" href="#">Section 1</a>
	            </li>
	            <li class="sub-nav__item">
	                <a class="sub-nav__item-link" href="#">Section 1</a>
	            </li>
	        </ul>
	    </div>
	</section>

	<div class="content-main" role="main">
		<h2>Page name</h2>
		<div class="message--master">
			<h3>{.message--master}</h3>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. <a href="#">link</a> Quisque sed fringilla ipsum. Suspendisse ut sem augue. Suspendisse sed magna a neque pretium aliquet. Sed justo dolor, bibendum vehicula imperdiet nec. </p>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus pharetra pellentesque Justo quis sodales. Suspendisse dolor magna a fringilla augue. Ut feugiat turpis a faselli.</p>
		</div>
		<div class="message--error-up">
			<p>{.message--error-up}<br />There are errors on this page please take a moment to check your answers.</p>
		</div>
		<div class="message--info-down">
			<p>{.message--info-down}<br />Don't forget to do X before Y.</p>
		</div>
		
		<div>
			<a href="#" class="block-link">
				<span class="block-link__title">Block-link</span>
				<span class="block-link__sub-title">Whooa, meta stuff</span>
				<span class="block-link__image"></span>
			</a>
		</div>

		<fieldset class="form">
			<legend class="form__title">Text entry</legend>
			<p>Bacon ipsum dolor sit amet, consectetur adipiscing elit. Phasellus pharetra pellentesque Justo quis sodales. Suspendisse dolor magna a fringilla augue. Ut feugiat turpis a faselli.</p>
			<ul class="form__content">
				<li class="form__group">
					<label class="form__question">Input</label>
					<div class="form__answer">
						<input class="form__control" type="text" placeholder="[type='text']" >
					</div>
				</li>
				<li class="form__group--error">
					<label class="form__question">Input</label>
					<div class="form__answer">
						<input class="form__control" type="tel" placeholder="[type='tel']" >
						<div class="error-message">Oops. there was an error</div>
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Input</label>
					<div class="form__answer">
						<input class="form__control" type="email" placeholder="[type='email']" >
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Input</label>
					<div class="form__answer">
						<input class="form__control" type="password" id="password" placeholder="[type='password']" >
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Input</label>
					<div class="form__answer">
						<input class="form__control" type="text" placeholder="[type='text']" >
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Textarea</label>
					<div class="form__answer">
						<textarea class="form__control--textarea" rows="3" ></textarea>
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Input &amp; search</label>
					<div class="form__answer">
						<!--	!!!! NO WHITESPACE !!!!	-->
						<input type="text" class="form__control postcode"><button class="button--secondary" title="Search" value="Search">Search</button><a href='#' class='help-link' id='help-6' onclick='return showHelp(this.id);'>?</a><i class="form__hint">Additional information</i>
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Delimited input</label>
					<div class="form__answer">
						<!--	!!!! NO WHITESPACE !!!!	-->
						<input type="tel" class="form__control--xxs"><b class="form__control-delimiter">/</b><input type="tel" class="form__control--xxs"><b class="form__control-delimiter">/</b><input type="tel" class="form__control--xxs">
						<a href='#' class='help-link' id='help-8' onclick='return showHelp(this.id);'>?</a>
					</div>
				</li>
				<!--	NB append "--search" to add affordance	-->
				<li class="form__group">				
					<label class="form__question" for="Proposer.id.1_FullTimeOccupation.occDesc">Search:Suggest input</label>				
					<div class="form__answer">
						<input type="text" class="form__control--search" autocomplete="off" ><a href='#' class='help-link' id='help-9' onclick='return showHelp(this.id);'>?</a>
						<i class="form__hint">Additional information</i>
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Textual value</label>
					<div class="form__answer">
						<span class="textual-value">Mr A N Proposer</span>
						<a href='#' class='help-link' id='help-2' onclick='return showHelp(this.id);'>?</a>
					</div>
				</li>
			</ul>
		</fieldset>
		<fieldset class="form">
			<legend class="form__title">Select menus</legend>
			<ul class="form__content">
				<li class="form__group">
					<label class="form__question">Selection (std. width)<i class="form__hint">Matches text input width</i></label>
					<div class="form__answer">
						<select class="form__control--select"><option selected="" value="">Mobile</option></select><a href='#' class='help-link' id='help-0' onclick='return showHelp(this.id);'>?</a>
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Selection (matches. width)<i class="form__hint">A <code>select</code> element with a class of <code>min</code> = data width.</i></label>
					<div class="form__answer">
						<select class="form__control--select--min"><option selected="" value="">Mobile</option></select><a href='#' class='help-link' id='help-1' onclick='return showHelp(this.id);'>?</a>
					</div>
				</li>
			</ul>
		</fieldset>
		<fieldset class="form">
			<legend class="form__title">Integral units</legend>
			<ul class="form__content">
				<li class="message--info">
					<p>
						Use <code>has-prefix</code> and <code>has-suffix</code> classes on the <code>input</code> and <code>unit-prefix</code> and <code>unit-suffix</code> on the element containing the unit.
					</p>
					<p>
						NB. no whitespace between the element and the <code>input</code>
					</p>
				</li>
				<li class="form__group">
					<label class="form__question">Prefixed input <i class="form__hint">Additional information with <a href="#">link</a></i></label>
					<div class="form__answer">
						<!--	!!!! NO WHITESPACE !!!!	-->
						<b class="unit-prefix">&pound;</b><input type="text" class="form__control has-prefix">
						<a href='#' class='help-link' id='help-3' onclick='return showHelp(this.id);'>?</a>
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Suffixed input</label>
					<div class="form__answer">
						<!--	!!!! NO WHITESPACE !!!!	-->
						<input type="text" class="form__control has-suffix"><b class="unit-suffix">mg</b>
						<a href='#' class='help-link' id='help-4' onclick='return showHelp(this.id);'>?</a>
					</div>
				</li>
			</ul>
		</fieldset>
		<fieldset class="form">
			<legend class="form__title">Dates</legend>
			<ul class="form__content">
				<li class="form__group">
					<label class="form__question">Date input</label>
					<div class="form__answer">
						<!--	!!!! NO WHITESPACE !!!!	-->
						<select class="form__control--select--min"><option value="">Day</option><option value="01">01</option><option value="02">...</option><option value="31">31</option></select><select class="form__control--select--min"><option value="">Month</option><option value="01">January</option><option value="02">...</option><option value="12">December</option></select><select class="form__control--select--min"><option value="">Year</option><option value="1984">...</option><option value="1976">1976</option></select>
						<a href='#' class='help-link' id='help-5' onclick='return showHelp(this.id);'>?</a>
					</div>
				</li>
				<li class="form__group">
					<label class="form__question">Date input - long year</label>
					<div class="form__answer">
						<!--	!!!! NO WHITESPACE !!!!	-->
						<select class="form__control--select--min"><option value="">Day</option><option value="01">01</option><option value="02">...</option><option value="31">31</option></select><select class="form__control--select--min"><option value="">Month</option><option value="01">January</option><option value="02">...</option><option value="12">December</option></select><input type='tel' size='4' maxlength='4' placeholder='yyyy' class='form__control--xs'/>
					</div>
				</li>
			</ul>
		</fieldset>
		<fieldset class="form">
			<legend class="form__title">Calls to action</legend>
			<ul class="form__content">
				<!--	NB you don't need a label in order to right align inputs	-->
				<li class="form__group">
					<div class="form__answer">
						<button class="button" title="Primary" value="Primary">{.buton}</button>
						<button class="button--secondary" title="Search trigger" value="Search trigger">{.buton--secondary}</button>
						<button class="button--tertiary" title="Search trigger" value="Search trigger">{.buton--tertiary}</button>
						<button class="button--muted" title="Search trigger" value="Search trigger">{.buton--muted}</button>
					</div>
				</li>
			</ul>
		</fieldset>

		<fieldset class="form">
			<legend class="form__title">Radio groups</legend>
			<ul class="form__content">
				<li class="form__group">
					<fieldset>
						<legend class="form__question">touch me</legend>
						<div class="form__answer">
							<label for="alpha" class="touch-control">
								<input id="alpha" name="new" type="radio"><span>Alpha<i class="form__hint">Additional info</i></span>
							</label>
							<label for="beta" class="touch-control">
								<input id="beta" name="new" type="radio"><span>Beta</span>
							</label>
						</div>
					</fieldset>
				</li>
				<li class="form__group">
					<fieldset>
						<legend class="form__question">touch me <i class="form__hint">Select all that apply</i></legend>
						<div class="form__answer">
							<label for="alpha-c" class="touch-control">
								<input id="alpha-c" name="new-c" type="checkbox"><span>Alpha</span>
							</label>
							<label for="beta-c" class="touch-control">
								<input id="beta-c" name="new-c" type="checkbox"><span>Beta</span>
							</label>
						</div>
					</fieldset>
				</li>
            </ul>
		</fieldset>
		<nav>
			<button class="button--muted" type="submit" value="Back">Back</button>
			<button class="button" type="submit" value="Continue">Continue</button>
		</nav>
	</div>
	<footer class="global-footer">
		<h1>To Do:</h1>
		<ol>
			<li>Native vs Custom form controls (icon font)</li>
			<li>Help icon (styling, position and transition)</li>
			<li>Button feed-<i>back</i></li>
			<li>Button feed-<i>forward</i></li>
			<li>Wayfaring</li>
			<li>Combine "Input &amp; search" elements</li>
			<li>Combine radio-group elements (bool = horizontal !bool = vertical)</li>
			<li>Duplicate radio-group to checkbox-group</li>
			<li>Ajax results</li>
		</ol>
	</footer>
	</form>
<script type="text/javascript">
var app = app || {};

app.utils = (function Utils(){
	'use strict';

	var addClass = function(el, cssClass){
	    if( el.className.indexOf( cssClass ) != -1 ) {
	    	return;
	    }
	    el.className += ' ' + cssClass;
    }

    var removeClass = function(el, cssClass){
    	var cn = el.className;
	    var rxp = new RegExp( "\\s?\\b"+cssClass+"\\b", "g" );
	    cn = cn.replace( rxp, '' );
	    el.className = cn;
    }

    return {
    	addClass: addClass,
    	removeClass: removeClass
    };

})();

app.Sticky = (function() {
    'use strict';

	var Sticky = function Sticky(trigger, cssClass) {
		this.waypoint = trigger;
		this.triggerClass = cssClass;
		this.classHolder = document.documentElement;
		this.BindEvents();
    };

    Sticky.prototype.BindEvents = function() {
    	var self = this;
		if (window.addEventListener) {
			window.addEventListener("scroll", function() { self.CheckPosition(); });
		} else if (window.attachEvent) {             
			// object.attachEvent <= IE8
			window.attachEvent("onscroll", function() { self.CheckPosition(); });
		}
    }

    Sticky.prototype.CheckPosition = function(){
    	if (this.waypoint.getBoundingClientRect().bottom <=0) {
			app.utils.addClass(this.classHolder, this.triggerClass);
		}else{
			app.utils.removeClass(this.classHolder, this.triggerClass);
		}
    }
    
    return Sticky;
})();

app.Password = (function() {
    'use strict';

	var Password = function Password(trigger) {
		this.passwordEl = trigger;
		this.BindEvents();
    };

    Password.prototype.BindEvents = function() {
    	var self = this;
		if (window.addEventListener) {
			this.passwordEl.addEventListener("focus", function() { self.ShowPassword(); });
			this.passwordEl.addEventListener("blur", function() { self.HidePassword(); });
		} else if (window.attachEvent) {             
			// object.attachEvent <= IE8
			this.passwordEl.attachEvent("onfocus", function() { self.ShowPassword(); });
			this.passwordEl.attachEvent("onblur", function() { self.HidePassword(); });
		}
    }

  	Password.prototype.ShowPassword = function(){
		this.passwordEl.type = 'text';
    }

    Password.prototype.HidePassword = function(){
		this.passwordEl.type = 'password';
    }
    
    return Password;
})();

var stickyNav = new app.Sticky(document.querySelector(".global-header"), 'sticky-nav');
var stickyMessage = new app.Sticky(document.querySelector(".message--master"), 'sticky-message');
var usablePassword = new app.Password(document.querySelector("#password"));


</script>
</body>
</html>
